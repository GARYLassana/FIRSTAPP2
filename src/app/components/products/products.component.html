<app-products-nav-bar (productEventEmitter)="onActionEvent($event)"></app-products-nav-bar>
<ng-container *ngIf="products$ | async as result" [ngSwitch]="result.dataState">
  <!-- Message de chargement des données -->
  <ng-container *ngSwitchCase="DataStateEnum.LOADING">
    <i class="fa fa-spinner" aria-hidden="true"></i> Loading...
  </ng-container>
  <!-- EO Message de chargement des données -->

  <!-- Message d'erreur -->
  <ng-container *ngSwitchCase="DataStateEnum.ERROR">
    <div class="text-danger">{{result.errorMessage}}</div>
  </ng-container>
  <!-- EO Message d'erreur  -->

  <!-- Le tableau des données -->
  <ng-container *ngSwitchCase="DataStateEnum.LOADED">
    <div class="container table-responsive" *ngIf="products$">
      <table class="table table-striped table-hover">
        <thead class="sticky-top">
          <tr>
            <th scope="col">ID</th>
            <th scope="col">Name</th>
            <th scope="col">Price</th>
            <th scope="col">Quantity</th>
            <th scope="col">Selected</th>
            <th scope="col">Aivalable</th>
            <th scope="col">Select</th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let p of result.data">
            <th scope="row">{{p.id}}</th>
            <th>{{p.name}}</th>
            <th>{{p.price}}</th>
            <th>{{p.quantity}}</th>
            <th>{{p.selected}}</th>
            <th>{{p.available}}</th>
            <th>
              <button class="btn" [ngClass]="p.selected ? 'btn-success' : 'btn-danger'" (click)="onSelect(p)">
                <span *ngIf="p.selected">Unselect</span>
                <span *ngIf="!p.selected">Select</span>
              </button>
            </th>
            <th>
              <i class="bi bi-pencil-square text-warning me-3 cursorPointer" (click)="onEdit(p)"></i>
              <i class="bi bi-trash text-danger cursorPointer" (click)="onDelete(p)"></i>
            </th>
          </tr>
        </tbody>
      </table>
    </div>
  </ng-container>
  <!-- EO Le tableau des données -->

</ng-container>